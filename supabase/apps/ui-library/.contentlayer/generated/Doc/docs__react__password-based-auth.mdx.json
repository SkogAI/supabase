{
  "title": "Password-based Authentication",
  "description": "Password-based authentication block for React Single Page Applications",
  "published": true,
  "featured": false,
  "component": false,
  "fragment": false,
  "toc": true,
  "body": {
    "raw": "\n<BlockPreview name=\"password-based-auth/auth/sign-up\" />\n\n## Installation\n\n<BlockItem\n  name=\"password-based-auth-react\"\n  description=\"All needed components for the password based auth flow\"\n/>\n\n## Folder structure\n\nThis block includes the [Supabase client](/ui/docs/react/client). If you already have one installed, you can skip overwriting it.\n\n<RegistryBlock itemName=\"password-based-auth-react\" />\n\n## Usage\n\nOnce you install the block in your React project, you'll get all the necessary pages and components to set up a password-based authentication flow.\n\n### Getting started\n\nAfter installing the block, you'll have the following environment variables in your `.env.local` file:\n\n```env\nVITE_SUPABASE_URL=\nVITE_SUPABASE_PUBLISHABLE_OR_ANON_KEY=\n```\n\n- If you're using supabase.com, you can find these values in the [Connect modal](https://supabase.com/dashboard/project/_?showConnect=true) under App Frameworks or in your project's [API settings](https://supabase.com/dashboard/project/_/settings/api).\n\n- If you're using a local instance of Supabase, you can find these values by running `supabase start` or `supabase status` (if you already have it running).\n\n### Setting up routes and redirect URLs\n\n1. Set the site URL in the [URL Configuration](https://supabase.com/dashboard/project/_/auth/url-configuration) settings in the Supabase Dashboard.\n1. Set up the route users will visit to reset or update their password. Go to the [URL Configuration](https://supabase.com/dashboard/project/_/auth/url-configuration) settings and add the `forgot-password` route to the list of Redirect URLs. It should look something like: `http://example.com/auth/forgot-password`.\n1. Update the redirect paths in `login.tsx` and `update-password.tsx` components to point to the logged-in routes in your app. Our examples use `/protected`, but you can set this to whatever fits your app.\n\n1. Add the following code in the authenticated route to redirect to login if the user is unauthenticated.\n\n```ts\nimport { useEffect } from \"react\"\nimport { createClient } from \"@supabase/supabase-js\"\n\nexport default function AuthenticatedRoute() {\n  useEffect(() => {\n    const checkAuth = async () => {\n      const client = createClient()\n      const { error } = await client.auth.getUser()\n\n      if (error) {\n        location.href = \"/login\"\n      }\n    }\n    checkAuth()\n  }, [])\n\n  return <div>Authenticated page</div>;\n}\n```\n\n## Further reading\n\n- [Password-based authentication (implicit flow)](https://supabase.com/docs/guides/auth/passwords?queryGroups=flow&flow=implicit)\n- [Authentication error codes](https://supabase.com/docs/guides/auth/debugging/error-codes)\n- [Email templates](https://supabase.com/docs/guides/auth/auth-email-templates)\n- [Email templates for local development](https://supabase.com/docs/guides/local-development/customizing-email-templates)\n- [Custom SMTP](https://supabase.com/docs/guides/auth/auth-smtp)\n",
    "code": "var Component=(()=>{var u=Object.create;var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var f=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),g=(o,e)=>{for(var r in e)c(o,r,{get:e[r],enumerable:!0})},s=(o,e,r,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of k(e))!v.call(o,a)&&a!==r&&c(o,a,{get:()=>e[a],enumerable:!(t=y(e,a))||t.enumerable});return o};var w=(o,e,r)=>(r=o!=null?u(m(o)):{},s(e||!o||!o.__esModule?c(r,\"default\",{value:o,enumerable:!0}):r,o)),b=o=>s(c({},\"__esModule\",{value:!0}),o);var d=f((x,i)=>{i.exports=_jsx_runtime});var _={};g(_,{default:()=>p,frontmatter:()=>N});var n=w(d()),N={title:\"Password-based Authentication\",description:\"Password-based authentication block for React Single Page Applications\"};function h(o){let e={a:\"a\",code:\"code\",div:\"div\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...o.components},{BlockItem:r,BlockPreview:t,RegistryBlock:a}=e;return r||l(\"BlockItem\",!0),t||l(\"BlockPreview\",!0),a||l(\"RegistryBlock\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t,{name:\"password-based-auth/auth/sign-up\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"installation\",children:[(0,n.jsx)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#installation\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Installation\"]}),`\n`,(0,n.jsx)(r,{name:\"password-based-auth-react\",description:\"All needed components for the password based auth flow\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"folder-structure\",children:[(0,n.jsx)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#folder-structure\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Folder structure\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This block includes the \",(0,n.jsx)(e.a,{href:\"/ui/docs/react/client\",children:\"Supabase client\"}),\". If you already have one installed, you can skip overwriting it.\"]}),`\n`,(0,n.jsx)(a,{itemName:\"password-based-auth-react\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"usage\",children:[(0,n.jsx)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#usage\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Usage\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Once you install the block in your React project, you'll get all the necessary pages and components to set up a password-based authentication flow.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"getting-started\",children:[(0,n.jsx)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#getting-started\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Getting started\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"After installing the block, you'll have the following environment variables in your \",(0,n.jsx)(e.code,{children:\".env.local\"}),\" file:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"env\",\"data-theme\":\"default\",__rawString__:`VITE_SUPABASE_URL=\nVITE_SUPABASE_PUBLISHABLE_OR_ANON_KEY=\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"env\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"VITE_SUPABASE_URL=\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"VITE_SUPABASE_PUBLISHABLE_OR_ANON_KEY=\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"If you're using supabase.com, you can find these values in the \",(0,n.jsx)(e.a,{href:\"https://supabase.com/dashboard/project/_?showConnect=true\",children:\"Connect modal\"}),\" under App Frameworks or in your project's \",(0,n.jsx)(e.a,{href:\"https://supabase.com/dashboard/project/_/settings/api\",children:\"API settings\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"If you're using a local instance of Supabase, you can find these values by running \",(0,n.jsx)(e.code,{children:\"supabase start\"}),\" or \",(0,n.jsx)(e.code,{children:\"supabase status\"}),\" (if you already have it running).\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"setting-up-routes-and-redirect-urls\",children:[(0,n.jsx)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#setting-up-routes-and-redirect-urls\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Setting up routes and redirect URLs\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Set the site URL in the \",(0,n.jsx)(e.a,{href:\"https://supabase.com/dashboard/project/_/auth/url-configuration\",children:\"URL Configuration\"}),\" settings in the Supabase Dashboard.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Set up the route users will visit to reset or update their password. Go to the \",(0,n.jsx)(e.a,{href:\"https://supabase.com/dashboard/project/_/auth/url-configuration\",children:\"URL Configuration\"}),\" settings and add the \",(0,n.jsx)(e.code,{children:\"forgot-password\"}),\" route to the list of Redirect URLs. It should look something like: \",(0,n.jsx)(e.code,{children:\"http://example.com/auth/forgot-password\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Update the redirect paths in \",(0,n.jsx)(e.code,{children:\"login.tsx\"}),\" and \",(0,n.jsx)(e.code,{children:\"update-password.tsx\"}),\" components to point to the logged-in routes in your app. Our examples use \",(0,n.jsx)(e.code,{children:\"/protected\"}),\", but you can set this to whatever fits your app.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Add the following code in the authenticated route to redirect to login if the user is unauthenticated.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",__rawString__:`import { useEffect } from \"react\"\nimport { createClient } from \"@supabase/supabase-js\"\n\nexport default function AuthenticatedRoute() {\n  useEffect(() => {\n    const checkAuth = async () => {\n      const client = createClient()\n      const { error } = await client.auth.getUser()\n\n      if (error) {\n        location.href = \"/login\"\n      }\n    }\n    checkAuth()\n  }, [])\n\n  return <div>Authenticated page</div>;\n}\n`,children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\" useEffect\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" }\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:' \"'}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-string-expression)\"},children:\"react\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:'\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\" createClient\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" }\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:' \"'}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-string-expression)\"},children:\"@supabase/supabase-js\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:'\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-function)\"},children:\" AuthenticatedRoute\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-function)\"},children:\"  useEffect\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-foreground)\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-function)\"},children:\" checkAuth\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"      const\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-constant)\"},children:\" client\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-function)\"},children:\" createClient\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-foreground)\"},children:\"()\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"      const\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-constant)\"},children:\" error\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" }\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\" client\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\"auth\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-function)\"},children:\"getUser\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-foreground)\"},children:\"()\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"      if\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-foreground)\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-foreground)\"},children:\") \"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\"        location\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\"href\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:' \"'}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-string-expression)\"},children:\"/login\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:'\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\"      }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-function)\"},children:\"    checkAuth\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-foreground)\"},children:\"()\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\"  },\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" []\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-foreground)\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-function)\"},children:\"div\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\"Authenticated\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\" page\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-parameter)\"},children:\"div\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-keyword)\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"var(--code-token-punctuation)\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"further-reading\",children:[(0,n.jsx)(e.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#further-reading\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Further reading\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/passwords?queryGroups=flow&flow=implicit\",children:\"Password-based authentication (implicit flow)\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/debugging/error-codes\",children:\"Authentication error codes\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/auth-email-templates\",children:\"Email templates\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/local-development/customizing-email-templates\",children:\"Email templates for local development\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/auth-smtp\",children:\"Custom SMTP\"})}),`\n`]})]})}function p(o={}){let{wrapper:e}=o.components||{};return e?(0,n.jsx)(e,{...o,children:(0,n.jsx)(h,{...o})}):h(o)}function l(o,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+o+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return b(_);})();\n;return Component;"
  },
  "_id": "docs/react/password-based-auth.mdx",
  "_raw": {
    "sourceFilePath": "docs/react/password-based-auth.mdx",
    "sourceFileName": "password-based-auth.mdx",
    "sourceFileDir": "docs/react",
    "contentType": "mdx",
    "flattenedPath": "docs/react/password-based-auth"
  },
  "type": "Doc",
  "slug": "/docs/react/password-based-auth",
  "slugAsParams": "react/password-based-auth"
}