# Supabase Configuration
# Copy this file to .env and fill in your actual values
# See OPENAI_SETUP.md for complete OpenAI integration guide

# OpenAI API Key for Supabase Studio AI features (SQL generation, query assistance, etc.)
# Get your key from: https://platform.openai.com/api-keys
# Format: sk-...
SUPABASE_OPENAI_API_KEY=your-openai-api-key-here

# For Edge Functions: If you want to use AI providers in your edge functions,
# set them as Supabase secrets (not in this file):
#   supabase secrets set OPENAI_API_KEY=your-openai-api-key-here
#   supabase secrets set OPENROUTER_API_KEY=sk-or-your-openrouter-key-here
#
# Examples:
#   - OpenAI direct: see supabase/functions/openai-chat/
#   - OpenRouter (100+ models): see supabase/functions/openrouter-chat/

# OpenAI API Key for Supabase Studio AI features (SQL generation, query assistance, etc.)
# Get your key from: https://platform.openai.com/api-keys
# Format: sk-...
SUPABASE_OPENAI_API_KEY=your-openai-api-key-here

# For Edge Functions: If you want to use AI providers in your edge functions,
# set them as Supabase secrets (not in this file):
#   supabase secrets set OPENAI_API_KEY=your-openai-api-key-here
#   supabase secrets set OPENROUTER_API_KEY=sk-or-your-openrouter-key-here
#
# Examples:
#   - OpenAI direct: see supabase/functions/openai-chat/
#   - OpenRouter (100+ models): see supabase/functions/openrouter-chat/

# OpenAI API Key for Supabase Studio AI features (SQL generation, query assistance, etc.)
# Get your key from: https://platform.openai.com/api-keys
# Format: sk-...
SUPABASE_OPENAI_API_KEY=your-openai-api-key-here

# For Edge Functions: If you want to use AI providers in your edge functions,
# set them as Supabase secrets (not in this file):
#   supabase secrets set OPENAI_API_KEY=your-openai-api-key-here
#   supabase secrets set OPENROUTER_API_KEY=sk-or-your-openrouter-key-here
#
# Examples:
#   - OpenAI direct: see supabase/functions/openai-chat/
#   - OpenRouter (100+ models): see supabase/functions/openrouter-chat/

# OpenAI API Key for Supabase Studio AI features (SQL generation, query assistance, etc.)
# Get your key from: https://platform.openai.com/api-keys
# Format: sk-...
SUPABASE_OPENAI_API_KEY=your-openai-api-key-here

# For Edge Functions: If you want to use OpenAI in your edge functions,
# set OPENAI_API_KEY as a Supabase secret (not in this file):
#   supabase secrets set OPENAI_API_KEY=your-openai-api-key-here
# See supabase/functions/openai-chat/ for an example

# Optional: SMS Provider (Twilio)
SUPABASE_AUTH_SMS_TWILIO_AUTH_TOKEN=your-twilio-auth-token

# Optional: External OAuth Providers
SUPABASE_AUTH_EXTERNAL_APPLE_SECRET=your-apple-oauth-secret

# Optional: S3 Configuration for OrioleDB
S3_HOST=your-bucket.s3-region.amazonaws.com
S3_REGION=us-east-1
S3_ACCESS_KEY=your-access-key
S3_SECRET_KEY=your-secret-key

# Optional: Email SMTP (SendGrid example)
SENDGRID_API_KEY=your-sendgrid-api-key

# =============================================================================
# MCP Server - Dedicated Pooler Configuration (Paid Tier Only)
# =============================================================================
# Dedicated PgBouncer pooler for high-performance AI agents
# Get from: Supabase Dashboard → Settings → Database → Connection Pooling
# Requires: Pro/Enterprise plan + dedicated pooler enabled
# See: docs/MCP_DEDICATED_POOLER.md

# Dedicated pooler connection string (port 6543 for transaction mode)
# Format: postgresql://postgres.[project-ref]:[password]@db.[project-ref].supabase.co:6543/postgres
SUPABASE_DEDICATED_POOLER=postgresql://postgres.your-project-ref:your-password@db.your-project-ref.supabase.co:6543/postgres

# Connection type indicator
DB_CONNECTION_TYPE=dedicated_pooler

# Pooler mode and configuration
DEDICATED_POOLER_MODE=transaction
DEDICATED_POOLER_PORT=6543
DEDICATED_POOLER_ENABLED=true

# IMPORTANT: Disable prepared statements (required for transaction mode)
DISABLE_PREPARED_STATEMENTS=true

# Connection pool sizing (adjust based on workload)
# Small agent: min=5, max=20
# Medium agent: min=10, max=50  
# Large agent: min=20, max=100
DB_POOL_MIN=10
DB_POOL_MAX=50
DB_POOL_IDLE_TIMEOUT=600000
DB_POOL_CONNECTION_TIMEOUT=10000
DB_POOL_ACQUIRE_TIMEOUT=30000

# Query timeouts (milliseconds)
DB_STATEMENT_TIMEOUT=60000
DB_QUERY_TIMEOUT=60000
DB_IDLE_IN_TRANSACTION_TIMEOUT=300000
